<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_Bag</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-10</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Sprite Map
SpriteMap = ds_map_create();
SpriteMap[? "Bow" ] = spr_Bow;
SpriteMap[? "Spike" ] = spr_spike;
SpriteMap[? "Bomb" ] = spr_bomb;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Inventory list
Inventory = ds_list_create();

// Test Data
ds_list_add( Inventory, obj_Bomb );
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Ammo Map
Ammo = ds_map_create();
Ammo[? "Arrows" ] = 0;
Ammo[? "Bombs" ] = 0;
Ammo[? "Spikes" ] = 1; // Infinite

// Test data
Ammo[? "Arrows" ] = 10;
Ammo[? "Bombs" ] =  10;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// SlideTimer
SlideTimer = 0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// State
/*
    Closed
    Opened
    Open
    Close
*/
State = "Closed_Start";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Cleanup SpriteMap
ds_map_destroy( SpriteMap );
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Cleanup Inventory
ds_list_destroy( Inventory );
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Cleanup Ammo Map
ds_map_destroy( Ammo );
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Remove duplicate weapon types
ds_list_sort( Inventory, true );
for( var w = 0; w &lt; ds_list_size( Inventory ); ++w )
{
    // If you have a Tier 2 bow, remove any Tier 1 bows
    if( ds_list_find_value( Inventory, w ) == obj_Bow_2 )
    {
        var i = ds_list_find_index( Inventory, obj_Bow );
        while( i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Bow );
            --w;
        }
        var i = ds_list_find_index( Inventory, obj_Bow_2 );
        while( i != w &amp;&amp; i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Bow_2 );
            --w;
        }
    }
    // If you have a Tier 3 bow, remove any Tier 1 or 2 bows
    if( ds_list_find_value( Inventory, w ) == obj_Bow_3 )
    {
        var i = ds_list_find_index( Inventory, obj_Bow_2 );
        while( i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Bow_2 );
            --w;
        }
        var i = ds_list_find_index( Inventory, obj_Bow );
        while( i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Bow );
            --w;
        }
        var i = ds_list_find_index( Inventory, obj_Bow_3 );
        while( i != w &amp;&amp; i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Bow_3 );
            --w;
        }
    }
    // If you have a Tier 2 Spike, remove Tier 1s
    if( ds_list_find_value( Inventory, w ) == obj_Spike_2 )
    {
        var i = ds_list_find_index( Inventory, obj_Spike );
        while( i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Spike );
            --w;
        }
        var i = ds_list_find_index( Inventory, obj_Spike_2 );
        while( i != w &amp;&amp; i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Spike_2 );
            --w;
        }
    }
    // If you have a Tier 3 Spike, remove lower tiers
    if( ds_list_find_value( Inventory, w ) == obj_Spike_3 )
    {
        var i = ds_list_find_index( Inventory, obj_Spike_2 );
        while( i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Spike_2 );
            --w;
        }
        var i = ds_list_find_index( Inventory, obj_Spike );
        while( i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Spike );
            --w;
        }
        var i = ds_list_find_index( Inventory, obj_Spike_3 );
        while( i != w &amp;&amp; i != -1 )
        {
            ds_list_delete( Inventory, i );
            i = ds_list_find_index( Inventory, obj_Spike_3 );
            --w;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Calculate Number of Weapons
var WeaponCount = ds_list_size( Inventory );
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Open
if( State == "Open_Start" )
{
    State = "Open";
    SlideTimer = 0;
}
if( State == "Open" )
{
    x = -32 * WeaponCount + 32 * WeaponCount * dsin( SlideTimer );
    if( SlideTimer &lt; 90 )
        SlideTimer += 90 / ( WeaponCount + 5 );
    else
        State = "Opened_Start";
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Opened
if( State == "Opened_Start" )
{
    State = "Opened";
    x = 0;
    y = 0;
}
if( State == "Opened" )
{
    var _mouse_x = device_mouse_x_to_gui( 0 );
    var _mouse_y = device_mouse_y_to_gui( 0 );
    if( mouse_check_button_pressed( mb_left ) )
    {
        if( _mouse_y &gt; y &amp;&amp; _mouse_y &lt; y + 32 )
        {
            if( _mouse_x &gt; x &amp;&amp; _mouse_x &lt; x + 32 )
                State = "Close_Start";
        }
        else if( _mouse_y &gt; y + 32 &amp;&amp; _mouse_y &lt; y + 64 )
        {
            var _index = floor( device_mouse_x_to_gui( 0 ) / 32 );
            if( _index &lt; ds_list_size( Inventory ) )
            {
                global.MyWeapon = Inventory[| _index ];
                State = "Close_Start";
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Close
if( State == "Close_Start" )
{
    State = "Close";
    SlideTimer = 0;
}
if( State == "Close" )
{
    x = -32 * WeaponCount * dsin( SlideTimer );
    if( SlideTimer &lt; 90 )
        SlideTimer += 5;
    else
        State = "Closed_Start";
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Closed
if( State == "Closed_Start" )
{
    State = "Closed";
    x = 0;
    y = 0;
}
if( State == "Closed" )
{
    var _mouse_x = device_mouse_x_to_gui( 0 );
    var _mouse_y = device_mouse_y_to_gui( 0 );
    if( mouse_check_button_pressed( mb_left ) )
        if( _mouse_x &gt; x &amp;&amp; _mouse_x &lt; x + 32 )
            if( _mouse_y &gt; y &amp;&amp; _mouse_y &lt; y + 32 )
                State = "Open_Start";
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Destroy self
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Calculate Number of Weapons
var WeaponCount = ds_list_size( Inventory );
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw bag
draw_sprite( sprite_index, image_index, 0, 0 );
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Open, Opened, Close
if( State == "Open" || State == "Opened" || State == "Close" )
{
    draw_rectangle_colour( x, y + 32, x + 32 * WeaponCount, y + 64, c_yellow, c_orange, c_yellow, c_black, true );
    for( var w = 0; w &lt; WeaponCount; ++w )
    {
        var _x = x + 32 * w + 16;
        var _y = y + 32 + 16;
        switch( Inventory[| w ] )
        {
            case obj_Bow:
            case obj_Bow_2:
            case obj_Bow_3:
                if( Ammo[? "Arrows" ] &gt; 0 )
                    draw_sprite_ext( SpriteMap[? "Bow" ], 0, _x, _y, 1, 1, 0, c_white, 1 );
                else
                    draw_sprite_ext( SpriteMap[? "Bow" ], 0, _x, _y, 1, 1, 0, c_red, 1 );
                break;
            case obj_Spike:
            case obj_Spike_2:
            case obj_Spike_3:
                draw_sprite_ext( SpriteMap[? "Spike" ], 0, _x, _y, 1, 1, 0, c_white, 1 );
                break;
            case obj_Bomb:
                if( Ammo[? "Bombs" ] &gt; 0 )
                    draw_sprite_ext( SpriteMap[? "Bomb" ], 0, _x, _y, 1, 1, 0, c_white, 1 );
                else
                    draw_sprite_ext( SpriteMap[? "Bomb" ], 0, _x, _y, 1, 1, 0, c_red, 1 );
                break;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Do not draw
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
